(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[824],{1808:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(8484),o=r.n(n),a=r(7876);function i(t){var e=t.onLogout,r=t.onNewChat,n=t.onDashboard;return(0,a.jsxs)("nav",{className:o().navbar,children:[(0,a.jsx)("div",{className:o().logo,children:"\uD83E\uDDE0 BrainBytes"}),(0,a.jsxs)("div",{className:o().links,children:[(0,a.jsx)("button",{onClick:r,className:o().navButton,children:"New Chat"}),(0,a.jsx)("button",{onClick:n,className:o().navButton,children:"Dashboard"}),(0,a.jsx)("button",{onClick:e,className:o().navButton,children:"Logout"})]})]})}},2306:t=>{t.exports={sidebarWrapper:"Sidebar_sidebarWrapper___WK3b",sidebarTitle:"Sidebar_sidebarTitle__8qywc",topicFilter:"Sidebar_topicFilter__X6QeP",sessionButton:"Sidebar_sessionButton___SMNJ",searchInput:"Sidebar_searchInput__5IjtD",active:"Sidebar_active__K0oVU",sessionItem:"Sidebar_sessionItem__T0Xw7",menuTrigger:"Sidebar_menuTrigger__PoR7H",dropdownMenu:"Sidebar_dropdownMenu__q_Dhv",clickableArea:"Sidebar_clickableArea___A7VR",previewText:"Sidebar_previewText__p_bBm"}},4359:t=>{t.exports={chatWrapper:"ChatInterface_chatWrapper__l8Z2C",chatContainer:"ChatInterface_chatContainer__KW1j0",messagesContainer:"ChatInterface_messagesContainer__FB2WN",message:"ChatInterface_message__DyT1I",userMessage:"ChatInterface_userMessage__aqGmS",aiMessage:"ChatInterface_aiMessage__el4G_",messageContent:"ChatInterface_messageContent__EF18s",messageTimestamp:"ChatInterface_messageTimestamp__JX7Tm",typingIndicator:"ChatInterface_typingIndicator__WVNcL",blink:"ChatInterface_blink___SShF",inputContainer:"ChatInterface_inputContainer__UnTxK",messageInput:"ChatInterface_messageInput__3Culk",sendButton:"ChatInterface_sendButton__TCoCR"}},4699:t=>{t.exports={modalOverlay:"Modal_modalOverlay__3wLnV",modalBox:"Modal_modalBox__MaW_6",subtext:"Modal_subtext__yAaR_",buttonGroup:"Modal_buttonGroup__dZ0VX",cancelButton:"Modal_cancelButton__Qftzt",deleteButton:"Modal_deleteButton__W_ARC"}},8025:(t,e,r)=>{"use strict";r.d(e,{A:()=>N});var n=r(4232),o=r(9099),a=r(4359),i=r.n(a),s=r(2306),c=r.n(s),u=r(4699),l=r.n(u),f=r(7876);function h(t){var e=t.visible,r=t.topic,n=t.onCancel,o=t.onConfirm;return e?(0,f.jsx)("div",{className:l().modalOverlay,children:(0,f.jsxs)("div",{className:l().modalBox,children:[(0,f.jsx)("h3",{children:"Delete chat?"}),(0,f.jsxs)("p",{children:["This will delete ",(0,f.jsx)("strong",{children:r||"this chat"}),"."]}),(0,f.jsxs)("div",{className:l().buttonGroup,children:[(0,f.jsx)("button",{onClick:n,className:l().cancelButton,children:"Cancel"}),(0,f.jsx)("button",{onClick:o,className:l().deleteButton,children:"Delete"})]})]})}):null}function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(){d=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(e,r,n,a){var i,s,c,u,l=Object.create((r&&r.prototype instanceof g?r:g).prototype);return o(l,"_invoke",{value:(i=e,s=n,c=new N(a||[]),u=h,function(e,r){if(u===y)throw Error("Generator is already running");if(u===v){if("throw"===e)throw r;return{value:t,done:!0}}for(c.method=e,c.arg=r;;){var n=c.delegate;if(n){var o=function e(r,n){var o=n.method,a=r.iterator[o];if(a===t)return n.delegate=null,"throw"===o&&r.iterator.return&&(n.method="return",n.arg=t,e(r,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+o+"' method")),m;var i=f(a,r.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var s=i.arg;return s?s.done?(n[r.resultName]=s.value,n.next=r.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):s:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,m)}(n,c);if(o){if(o===m)continue;return o}}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if(u===h)throw u=v,c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);u=y;var a=f(i,s,c);if("normal"===a.type){if(u=c.done?v:"suspendedYield",a.arg===m)continue;return{value:a.arg,done:c.done}}"throw"===a.type&&(u=v,c.method="throw",c.arg=a.arg)}})}),l}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",y="executing",v="completed",m={};function g(){}function b(){}function _(){}var x={};u(x,i,function(){return this});var w=Object.getPrototypeOf,j=w&&w(w(k([])));j&&j!==r&&n.call(j,i)&&(x=j);var S=_.prototype=g.prototype=Object.create(x);function I(t){["next","throw","return"].forEach(function(e){u(t,e,function(t){return this._invoke(e,t)})})}function L(t,e){var r;o(this,"_invoke",{value:function(o,a){function i(){return new e(function(r,i){!function r(o,a,i,s){var c=f(t[o],t,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==p(l)&&n.call(l,"__await")?e.resolve(l.__await).then(function(t){r("next",t,i,s)},function(t){r("throw",t,i,s)}):e.resolve(l).then(function(t){u.value=t,i(u)},function(t){return r("throw",t,i,s)})}s(c.arg)}(o,a,r,i)})}return r=r?r.then(i,i):i()}})}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function k(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw TypeError(p(e)+" is not iterable")}return b.prototype=_,o(S,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:b,configurable:!0}),b.displayName=u(_,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,c,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},I(L.prototype),u(L.prototype,s,function(){return this}),e.AsyncIterator=L,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new L(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then(function(t){return t.done?t.value:i.next()})},I(S),u(S,c,"Generator"),u(S,i,function(){return this}),u(S,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=k,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:k(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function y(t,e,r,n,o,a,i){try{var s=t[a](i),c=s.value}catch(t){r(t);return}s.done?e(c):Promise.resolve(c).then(n,o)}function v(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,s=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return s}}(t,e)||m(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){if(t){if("string"==typeof t)return g(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if("Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(t,e)}}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function b(t){var e,r,o,a=t.userId,i=t.onSelectSession,s=v((0,n.useState)([]),2),u=s[0],p=s[1],b=v((0,n.useState)("All"),2),_=b[0],x=b[1],w=v((0,n.useState)(""),2),j=w[0],S=w[1],I=v((0,n.useState)(null),2),L=I[0],E=I[1],C=v((0,n.useState)(null),2),N=C[0],k=C[1],O=v((0,n.useState)([]),2),T=O[0],A=O[1];(0,n.useEffect)(function(){a&&fetch("".concat("https://brainbytes-backend-oj3s.onrender.com","/api/chat/sessions/").concat(a)).then(function(t){return t.json()}).then(function(t){return p(t.sessions||[])})},[a]),(0,n.useEffect)(function(){a&&fetch("".concat("https://brainbytes-backend-oj3s.onrender.com","/api/chat/history/user/").concat(a)).then(function(t){return t.json()}).then(function(t){return A(t.messages||[])})},[a]);var B=(e=d().mark(function t(){return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=N&&N.sessionId){t.next=1;break}return t.abrupt("return");case 1:return t.next=2,fetch("".concat("https://brainbytes-backend-oj3s.onrender.com","/api/chat/sessions/").concat(N.sessionId),{method:"DELETE"});case 2:p(function(t){return t.filter(function(t){return(t.sessionId||t._id)!==N.sessionId})}),k(null),E(null);case 3:case"end":return t.stop()}},t)}),r=function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(t){y(a,n,o,i,s,"next",t)}function s(t){y(a,n,o,i,s,"throw",t)}i(void 0)})},function(){return r.apply(this,arguments)}),D=function(t){if(Array.isArray(t))return g(t)}(o=new Set(u.map(function(t){var e;return(null==(e=t.topic)?void 0:e.split(" – ")[0])||"General"})))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(o)||m(o)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),M=u.filter(function(t){var e,r,n=t.sessionId||t._id,o="All"===_||(null==(e=t.topic)?void 0:e.startsWith(_)),a=T.filter(function(t){return t.sessionId===n}).some(function(t){var e;return null==(e=t.text)?void 0:e.toLowerCase().includes(j.toLowerCase())}),i=(null==(r=t.topic)?void 0:r.toLowerCase().includes(j.toLowerCase()))||a;return o&&i});return(0,f.jsxs)("div",{className:c().sidebarWrapper,children:[(0,f.jsx)("div",{className:c().sidebarTitle,children:"\uD83E\uDDE0 Chat History"}),(0,f.jsx)("input",{type:"text",placeholder:"Search chats...",className:c().searchInput,value:j,onChange:function(t){return S(t.target.value)}}),(0,f.jsxs)("select",{className:c().topicFilter,onChange:function(t){return x(t.target.value)},value:_,children:[(0,f.jsx)("option",{value:"All",children:"All Topics"}),D.map(function(t,e){return(0,f.jsx)("option",{value:t,children:t},e)})]}),M.map(function(t){var e=t.sessionId||t._id,r=T.find(function(t){var r;return t.sessionId===e&&(null==(r=t.text)?void 0:r.toLowerCase().includes(j.toLowerCase()))});return(0,f.jsxs)("div",{className:c().sessionItem,onMouseLeave:function(){return E(null)},children:[(0,f.jsxs)("div",{className:c().clickableArea,onClick:function(){return i(e)},children:[(0,f.jsx)("div",{className:c().sessionButton,children:t.topic||"Untitled Chat"}),j&&(null==r?void 0:r.text)&&(0,f.jsx)("div",{className:c().previewText,children:(0,f.jsx)("span",{dangerouslySetInnerHTML:{__html:r.text.replace(RegExp("(".concat(j,")"),"gi"),"<mark>$1</mark>")}})})]}),(0,f.jsx)("div",{className:c().menuTrigger,onClick:function(t){t.stopPropagation(),E(function(t){return t===e?null:e})},children:"⋮"}),L===e&&(0,f.jsx)("div",{className:l().dropdownMenu,children:(0,f.jsx)("button",{onClick:function(){return k({sessionId:e,topic:t.topic})},children:"Delete"})})]},e)}),(0,f.jsx)(h,{visible:!!N,topic:null==N?void 0:N.topic,onCancel:function(){return k(null)},onConfirm:B})]})}function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x(t){return function(t){if(Array.isArray(t))return E(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||L(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(){w=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(e,r,n,a){var i,s,c,u,l=Object.create((r&&r.prototype instanceof v?r:v).prototype);return o(l,"_invoke",{value:(i=e,s=n,c=new N(a||[]),u=h,function(e,r){if(u===p)throw Error("Generator is already running");if(u===d){if("throw"===e)throw r;return{value:t,done:!0}}for(c.method=e,c.arg=r;;){var n=c.delegate;if(n){var o=function e(r,n){var o=n.method,a=r.iterator[o];if(a===t)return n.delegate=null,"throw"===o&&r.iterator.return&&(n.method="return",n.arg=t,e(r,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+o+"' method")),y;var i=f(a,r.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var s=i.arg;return s?s.done?(n[r.resultName]=s.value,n.next=r.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):s:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,y)}(n,c);if(o){if(o===y)continue;return o}}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if(u===h)throw u=d,c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);u=p;var a=f(i,s,c);if("normal"===a.type){if(u=c.done?d:"suspendedYield",a.arg===y)continue;return{value:a.arg,done:c.done}}"throw"===a.type&&(u=d,c.method="throw",c.arg=a.arg)}})}),l}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="executing",d="completed",y={};function v(){}function m(){}function g(){}var b={};u(b,i,function(){return this});var x=Object.getPrototypeOf,j=x&&x(x(k([])));j&&j!==r&&n.call(j,i)&&(b=j);var S=g.prototype=v.prototype=Object.create(b);function I(t){["next","throw","return"].forEach(function(e){u(t,e,function(t){return this._invoke(e,t)})})}function L(t,e){var r;o(this,"_invoke",{value:function(o,a){function i(){return new e(function(r,i){!function r(o,a,i,s){var c=f(t[o],t,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==_(l)&&n.call(l,"__await")?e.resolve(l.__await).then(function(t){r("next",t,i,s)},function(t){r("throw",t,i,s)}):e.resolve(l).then(function(t){u.value=t,i(u)},function(t){return r("throw",t,i,s)})}s(c.arg)}(o,a,r,i)})}return r=r?r.then(i,i):i()}})}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function k(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw TypeError(_(e)+" is not iterable")}return m.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},I(L.prototype),u(L.prototype,s,function(){return this}),e.AsyncIterator=L,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new L(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then(function(t){return t.done?t.value:i.next()})},I(S),u(S,c,"Generator"),u(S,i,function(){return this}),u(S,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=k,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:k(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function j(t,e,r,n,o,a,i){try{var s=t[a](i),c=s.value}catch(t){r(t);return}s.done?e(c):Promise.resolve(c).then(n,o)}function S(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var a=t.apply(e,r);function i(t){j(a,n,o,i,s,"next",t)}function s(t){j(a,n,o,i,s,"throw",t)}i(void 0)})}}function I(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,s=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return s}}(t,e)||L(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(t,e){if(t){if("string"==typeof t)return E(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if("Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(t,e)}}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var C="https://brainbytes-backend-oj3s.onrender.com";function N(){var t,e=(0,o.useRouter)(),r=e.query.sessionId,a=I((0,n.useState)(null),2),s=a[0],c=a[1],u=I((0,n.useState)(!1),2),l=u[0],h=u[1],p=I((0,n.useState)([]),2),d=p[0],y=p[1],v=I((0,n.useState)(""),2),m=v[0],g=v[1],_=I((0,n.useState)(!1),2),j=_[0],L=_[1],E=I((0,n.useState)(null),2),N=E[0],k=E[1],O=I((0,n.useState)(null),2),T=O[0],A=O[1],B=(0,n.useRef)(null);(0,n.useEffect)(function(){var t=localStorage.getItem("token"),r=localStorage.getItem("userId");t?(k(t),A(r),h(!0)):e.push("/login")},[e]),(0,n.useEffect)(function(){if(l&&e.isReady){var t=r||localStorage.getItem("sessionId");t||(t=crypto.randomUUID()),localStorage.setItem("sessionId",t),c(t)}},[l,r,e.isReady]),(0,n.useEffect)(function(){if(s){var t;(t=S(w().mark(function t(){var e,r;return w().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return L(!0),t.prev=1,t.next=2,fetch("".concat(C,"/api/chat/history/").concat(s));case 2:return e=t.sent,t.next=3,e.json();case 3:y(Array.isArray((r=t.sent).messages)?r.messages:[]),t.next=5;break;case 4:t.prev=4,console.error("Error loading history:",t.catch(1));case 5:return t.prev=5,L(!1),t.finish(5);case 6:case"end":return t.stop()}},t,null,[[1,4,5,6]])})),function(){return t.apply(this,arguments)})()}},[s]),(0,n.useEffect)(function(){var t;null==(t=B.current)||t.scrollIntoView({behavior:"smooth"})},[d]);var D=(t=S(w().mark(function t(e){var r,n,o,a;return w().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),""!==m.trim()){t.next=1;break}return t.abrupt("return");case 1:return r={id:Date.now(),text:m,sender:"user",timestamp:new Date().toISOString()},y(function(t){return[].concat(x(t),[r])}),g(""),L(!0),t.prev=2,t.next=3,fetch("".concat(C,"/api/chat"),{method:"POST",headers:{"Content-Type":"application/json",sessionid:s,Authorization:"Bearer ".concat(N)},body:JSON.stringify({message:m,userId:T})});case 3:return n=t.sent,t.next=4,n.json();case 4:o=t.sent,a={id:Date.now()+1,text:o.message,sender:"ai",timestamp:new Date().toISOString()},y(function(t){return[].concat(x(t),[a])}),t.next=6;break;case 5:t.prev=5,console.error("Error sending message:",t.catch(2)),y(function(t){return[].concat(x(t),[{id:Date.now()+2,text:"Sorry, something went wrong. Please try again later.",sender:"ai",timestamp:new Date().toISOString()}])});case 6:return t.prev=6,L(!1),t.finish(6);case 7:case"end":return t.stop()}},t,null,[[2,5,6,7]])})),function(e){return t.apply(this,arguments)});return l?(0,f.jsxs)("div",{style:{display:"flex",height:"calc(100vh - 60px)"},children:[(0,f.jsx)(b,{userId:T,onSelectSession:function(t){localStorage.setItem("sessionId",t),e.push("/chat?sessionId=".concat(t))}}),(0,f.jsx)("div",{className:i().chatWrapper,style:{flex:1},children:(0,f.jsxs)("div",{className:i().chatContainer,children:[(0,f.jsxs)("div",{className:i().messagesContainer,children:[d.map(function(t){return(0,f.jsxs)("div",{className:"".concat(i().message," ").concat("user"===t.sender?i().userMessage:i().aiMessage),children:[(0,f.jsx)("div",{className:i().messageContent,children:t.text}),(0,f.jsx)("div",{className:i().messageTimestamp,children:(0,f.jsx)("div",{className:i().messageTimestamp,children:new Date(t.timestamp).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})})})]},t._id||t.id)}),j&&(0,f.jsx)("div",{className:"".concat(i().message," ").concat(i().aiMessage),children:(0,f.jsxs)("div",{className:i().typingIndicator,children:[(0,f.jsx)("span",{}),(0,f.jsx)("span",{}),(0,f.jsx)("span",{})]})}),(0,f.jsx)("div",{ref:B})]}),(0,f.jsxs)("form",{onSubmit:D,className:i().inputContainer,children:[(0,f.jsx)("input",{type:"text",value:m,onChange:function(t){return g(t.target.value)},placeholder:"Type your message here...",className:i().messageInput}),(0,f.jsx)("button",{type:"submit",className:i().sendButton,children:"Send"})]})]})})]}):null}},8484:t=>{t.exports={navbar:"NavBar_navbar___LVQF",logo:"NavBar_logo__r4itX",links:"NavBar_links__TZgMK",navButton:"NavBar_navButton__0Fz1s"}},9099:(t,e,r)=>{t.exports=r(4600)}}]);